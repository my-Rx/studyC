set(EXCLUDE_PATHS
"CMakeFiles"
)

file(GLOB_RECURSE PROJ_SRC "*.h" "*.c")
foreach(TMP_PATH ${PROJ_SRC})
foreach(EXCLUDE_PATH ${EXCLUDE_PATHS})
string(FIND ${TMP_PATH} ${EXCLUDE_PATH} RESULT)
if(NOT ${RESULT} EQUAL -1)
list(REMOVE_ITEM PROJ_SRC ${TMP_PATH})
endif()
endforeach(EXCLUDE_PATH)
endforeach(TMP_PATH)

cmake_path(GET CMAKE_CURRENT_SOURCE_DIR FILENAME CURDIR_TO_PROJ_NAME)   
string(REPLACE " " "_" ProjectId ${CURDIR_TO_PROJ_NAME})
project(${CURDIR_TO_PROJ_NAME})

add_executable(${CURDIR_TO_PROJ_NAME} ${PROJ_SRC})